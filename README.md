# MIxer-Mach
คำอธิบาย
1) Protocal Example
Header	Data	Close
#	1234	5;
 Header คือหัวเปิดเริ่ม protocol 
Data คือ จุดที่จะให้แก้วไปใส่เครื่องดื่ม เช่น 1234 นี่ก็คือจุดที่ 1,2,3,4 ตามลำดับ (สามารถเปลี่ยนได้)
Close คือ จุดที่จะให้เสริฟเครื่องดืม และเป็นหัวปิด Protocal
*หมายเหตุ สามารถแก้ไข Protocal ได้ตามความเหมาะสม อันนี้ลองทำมาเพื่อเทสคร่าวๆเท่านั้น แต่ต้องเข้าไปแก้โปรแกรมข้างในด้วย
2) code
 
ส่วนนื้คือส่วนกำหนด PINOUT และประกาศตัวแปร
 ส่วนที่ 2 นี้คือ Void setup เอาไว้ตั้ง Mode pin ว่าจะให้ pin อันนี้เป็นประเภท INPUT หรือ OUTPUT ในส่วนนี้เราสามารถเขียนโปรแกรมเข้าไปได้ แต่! มันจะทำงานเพียงแค่ครั้งเดียวเท่านั้น
•	Serial.begin(baud rate); ตัวนี้เอาไว้ set baud rate ระหว่างอุปกรณ์เชื่อมต่อ 2 ตัว ถ้า baud rate ไม่ตรงกัน มันจะไม่สามารถสื่อสารกันได้
 
ส่วนที่ 3 นี้เป็นส่วนโปรแกรมหลัก Void loop() ส่วนนี้โปรแกรมจะทำงานตลอดเวลาจนไม่มีที่สิ้นสุด
	3.1 นี้เป็นส่วนการอ่านค่าที่เราส่งมาตามที่ได้กล่าวไว้ในตอนแรก เริ่มจากการรับ header ถ้า header ยังไม่มา จะไม่สามารถรับค่าอื่นได้จนกว่าจะได้ header แล้วตามด้วย data(จุดที่จะให้ไป) แล้วตามด้วย close ซึ่งทั้งหมดจะเก็บไว้ในตัวแปร Array ที่ชื่อว่า buffer[] ถ้า protocol ถูกต้อง จะขึ้นคำว่า OK ถ้า protocol ผิด จะฟ้องว่า ERROR ตามรูป
 
 
	3.2 หลังจากที่ protocol ถูกต้อง ระบบก็จะเริ่มทำงาน โดยเริ่มต้น ที่วางแก้วจะเลื่อนเข้าหา Limit switch เพื่อเตรียมเริ่มต้นกระบวนการผสมเครื่องดื่มตามจุดต่างๆ
   
 
 	3.3 ส่วนนี้คือส่วนที่จะให้ที่วางแก้วนั้นไปตามจุดต่างๆ ตามที่กำหนดไว้ โดยมีทั้งหมด 5 จุดรวมจุดเสริฟ ระยะทาง 13000 /5 ได้ 2600 ตามภาพนี้  เมื่อไปถึงจุดที่กำหนดแล้ว ก็ทำการปั้มน้ำออกมาในแต่ล่ะจุด เมื่อใส่ส่วนผสมตามจุดต่างๆครบแล้วก็จะยังจุดเสริฟตามที่เราได้กำหนดไว้ แต่ถ้าพบว่ามีจุดซ้ำ ระบบก็จะทำการเพิ่มส่วนผสมให้นานขึ้น 
 	3.4 ส่วนนี้เป็น ERROR Protocal ของแต่ล่ะสาเหตุ
  3.5 อันนี้คือ function สั่งงาน Stepper motor โดยตัวแปรแรก steps หรือ deg เอาไว้กำหนด pluse หรือองศาที่จะให้มอเตอร์นั้นหมุนไปตามตำแหน่ง ส่วนตัวแปร seppd เอาไว้ควบคุมความเร็ว (อันนี้เป็นโปรแกรมสำเร็จรูปแล้วไม่ต้องแก้ไข)
  
3.6 ส่วนนี้คือ function มอเตอร์ปั้มน้ำ วิธีเรียกใช้งานก็ Motor_PUM(ตามต้วยตำแหน่งของมอเตอร์หรือจุดเสริฟ) โดยตัวเลขนั้นคือหมายเลขของมอเตอร์ ส่วนหมายเลข 5 นั้นคือจุดเสริฟ ส่วนถ้าจะสั่งให้มอเตอร์หยุดหมุนก็สามารถใสรหัสหมายเลข 5 ลงไปได้เลย (อันนี้เป็นโปรแกรมสำเร็จรูปแล้วไม่ต้องแก้ไข)
 
3.7 ผลการรันโปรแกรม  กระบวนการจะสิ้นสุดก็ต่อเมื่อขึ้นคำว่า complete 
4) ผังวงจร ใช้ในกรณีสายหลุดทำนองนี้  
